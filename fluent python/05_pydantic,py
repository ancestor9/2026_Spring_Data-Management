import dataclasses
from typing import List, Optional, TypedDict
from pydantic import BaseModel, ValidationError

## 1. dataclass ì˜ˆì œ
# ----------------------------------------------------

@dataclasses.dataclass
class DataUser:
    """íƒ€ì… íŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ëŸ°íƒ€ì„ ìœ íš¨ì„± ê²€ì‚¬ëŠ” ì—†ìŒ."""
    id: int
    name: str
    is_active: bool = True

print("="*15 + " dataclass ê²°ê³¼ " + "="*15)

# (1) ì˜¬ë°”ë¥¸ ë°ì´í„°
user_data = DataUser(id=1, name="Alice")
print(f"âœ… ìœ íš¨í•œ ë°ì´í„° (ì •ìƒ): {user_data}")

# (2) ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„° (str ëŒ€ì‹  intë¥¼ í• ë‹¹)
# dataclassëŠ” ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šê³  ê°’ì„ ê·¸ëŒ€ë¡œ ì €ì¥í•¨ (íƒ€ì… ê²€ì‚¬ X)
invalid_user = DataUser(id=2, name=123)
print(f"âš ï¸ ìœ íš¨í•˜ì§€ ì•Šì€ ë°ì´í„° (ì €ì¥ë¨): {invalid_user}")


## 2. Pydantic BaseModel ì˜ˆì œ
# ----------------------------------------------------

class PydanticUser(BaseModel):
    """íƒ€ì… íŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë©°, ëŸ°íƒ€ì„ì— ìœ íš¨ì„± ê²€ì‚¬ ë° ê°•ì œ ë³€í™˜ ìˆ˜í–‰."""
    id: int
    name: str
    is_active: bool = True

print("\n" + "="*15 + " Pydantic ê²°ê³¼ " + "="*15)

# (1) ì˜¬ë°”ë¥¸ ë°ì´í„°
p_user_data = PydanticUser(id=1, name="Bob")
print(f"âœ… ìœ íš¨í•œ ë°ì´í„° (ì •ìƒ): {p_user_data}")

# (2) íƒ€ì… ê°•ì œ ë³€í™˜ (str '2'ê°€ intë¡œ ìë™ ë³€í™˜ë¨)
p_user_coerce = PydanticUser(id='2', name="Charlie")
print(f"ğŸ”„ íƒ€ì… ê°•ì œ ë³€í™˜ (ì •ìƒ): {p_user_coerce}")

# (3) ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ (ìœ íš¨í•œ bool ê°’ì´ ì•„ë‹˜)
try:
    PydanticUser(id=3, name="David", is_active="not_a_bool")
except ValidationError as e:
    print(f"âŒ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨: \n{e.errors()[0]}")